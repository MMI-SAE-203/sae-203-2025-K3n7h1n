---
import FilmCard from '../../components/Card.astro';
import ActivityCard from '../../components/ActivityCard.astro';
import GuestCard from '../../components/GuestCard.astro';
import Layout from '../../layouts/Layout.astro';
import { filmsOrder } from '../../../backend.mjs';
import { NameOrder } from '../../../backend.mjs';
import { ActOrder } from '../../../backend.mjs';

const film = await filmsOrder();
const guest = await NameOrder();
const activities = await ActOrder();
---
<Layout title="Programmation" class="font-mono">
  <section class="bg-[#77B5FE] text-[#FFD700] py-16">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl md:text-6xl font-extrabold mb-4">
        Festival CinéMatsuri
      </h1>
      <p class="text-lg md:text-2xl font-medium mb-8">
        Un festival unique dédié aux films d'animation japonais et à la culture manga.
      </p>
      <a 
        href="/billetterie" 
        class="inline-block bg-[#FF69B4] text-white px-8 py-4 rounded-full shadow-lg hover:bg-pink-500 transition-colors"
      >
        Réserver ma place
      </a>
    </div>
  </section>
  <!-- CONTENU -->
  <div x-data="{ activeFilter: 'all' }" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="mt-4 p-6 bg-gray-100 rounded-lg shadow-md mb-12">
      <p class="text-gray-700 mb-4">
        Découvrez un festival unique entièrement dédié aux films d'animation japonais. Situé à Andelnans, près de Belfort, il propose une expérience immersive avec des projections exclusives, des rencontres avec des professionnels, des ateliers pour découvrir les métiers de l'animation et des stands créatifs en lien avec la culture japonaise. Venez explorer l'univers riche et créatif de l'animation japonaise !
      </p>
    </div>
    
    <!-- Boutons de filtre responsives -->
    <div class="flex flex-wrap gap-4 justify-center mb-8">
      <button
        class="w-full sm:w-auto inline-flex items-center px-4 py-2 rounded-full border border-gray-300"
        :class="activeFilter === 'all' ? 'bg-[#FFD700] text-[#333]' : 'bg-white text-gray-600'"
        @click="activeFilter = 'all'"
      >
        Tous
      </button>
      <button
        class="w-full sm:w-auto inline-flex items-center px-4 py-2 rounded-full border border-gray-300"
        :class="activeFilter === 'films' ? 'bg-[#FFD700] text-[#333]' : 'bg-white text-gray-600'"
        @click="activeFilter = 'films'"
      >
        Films
      </button>
      <button
        class="w-full sm:w-auto inline-flex items-center px-4 py-2 rounded-full border border-gray-300"
        :class="activeFilter === 'activites' ? 'bg-[#FFD700] text-[#333]' : 'bg-white text-gray-600'"
        @click="activeFilter = 'activites'"
      >
        Activités
      </button>
      <button
        class="w-full sm:w-auto inline-flex items-center px-4 py-2 rounded-full border border-gray-300"
        :class="activeFilter === 'invites' ? 'bg-[#FFD700] text-[#333]' : 'bg-white text-gray-600'"
        @click="activeFilter = 'invites'"
      >
        Invités
      </button>
    </div>
    
    <!-- Section Films -->
    <section id="films" x-show="activeFilter === 'all' || activeFilter === 'films'" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {film.length > 0 ? (
        film.map((film) => (
          <FilmCard {...film} key={film.id} />
        ))
      ) : (
        <p class="text-gray-600 text-center">Aucune programmation film disponible pour le moment.</p>
      )}
    </section>
    
    <!-- Section Activités -->
    <section id="activites" x-show="activeFilter === 'all' || activeFilter === 'activites'" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-12">
      {activities.length > 0 ? (
        activities.map((activity) => (
          <ActivityCard {...activity} key={activity.id} />
        ))
      ) : (
        <p class="text-gray-600 text-center">Aucune activité disponible pour le moment.</p>
      )}
    </section>
    
    <!-- Section Invités -->
    <section id="invites" x-show="activeFilter === 'all' || activeFilter === 'invites'" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-12">
      {guest.length > 0 ? (
        guest.map((guest) => (
          <GuestCard {...guest} key={guest.id} />
        ))
      ) : (
        <p class="text-gray-600 text-center">Aucun invité disponible pour le moment.</p>
      )}
    </section>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</Layout>
